if getgenv().CommandScriptLoaded then
    warn("Script jÃ¡ carregado!")
    return
end
getgenv().CommandScriptLoaded = true

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local prefix = ";"
local originalCameraSubject = Camera.CameraSubject
local xrayParts = {}

-- FunÃ§Ã£o de busca rÃ¡pida por jogador
local function FindPlayer(name)
    name = name:lower()
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Name:lower():find(name) or player.DisplayName:lower():find(name) then
            return player
        end
    end
end

-- GUI com comandos
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
task.spawn(function()
    if PlayerGui:FindFirstChild("CmdGui") then
        PlayerGui:FindFirstChild("CmdGui"):Destroy()
    end

    local gui = Instance.new("ScreenGui", PlayerGui)
    gui.Name = "CmdGui"
    gui.ResetOnSpawn = false

    local label = Instance.new("TextLabel", gui)
    label.Size = UDim2.new(0.5, 0, 0.5, 0)
    label.Position = UDim2.new(0.25, 0, 0.25, 0)
    label.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    label.TextColor3 = Color3.new(1, 1, 1)
    label.BackgroundTransparency = 0.3
    label.TextScaled = true
    label.Font = Enum.Font.SourceSansBold
    label.TextWrapped = true
    label.Text = [[
ðŸ”¥ Comandos ðŸ”¥

;tp [nick] â†’ Teleportar
;tpsofa â†’ SofÃ¡ secreto
;speed [nÃºmero] â†’ Velocidade
;jumppower [nÃºmero] â†’ Pulo
;view [nick] â†’ CÃ¢mera de alguÃ©m
;unview â†’ Sua cÃ¢mera
;xray â†’ Ativar Xray
;unxray â†’ Desativar Xray
;coolkid â†’ Coolkid Hub
;portalgun â†’ Portal Gun
;void â†’ Void FE
;gravitygun â†’ Gravity Gun
;angelhub â†’ Angel Hub
;spawncars â†’ Spawn Cars
;duplicatorcars â†’ Duplicar Carros
;lanterna â†’ Lanterna
]]

    task.wait(8)
    gui:Destroy()
end)

-- Xray funÃ§Ãµes
local function enableXray()
    xrayParts = {}
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") and v.Transparency < 1 and v.CanCollide then
            table.insert(xrayParts, {part = v, transparency = v.Transparency})
            v.Transparency = 0.7
        end
    end
end

local function disableXray()
    for _, v in pairs(xrayParts) do
        if v.part and v.part.Parent then
            v.part.Transparency = v.transparency
        end
    end
    xrayParts = {}
end

-- Listener de comandos
LocalPlayer.Chatted:Connect(function(msg)
    if not msg:lower():sub(1, #prefix) == prefix then return end

    local args = msg:sub(#prefix + 1):split(" ")
    local cmd = args[1]:lower()

    if cmd == "tp" and args[2] then
        local target = FindPlayer(args[2])
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character:PivotTo(target.Character.HumanoidRootPart.CFrame)
        end

    elseif cmd == "tpsofa" then
        LocalPlayer.Character:PivotTo(CFrame.new(-83, 21, -131))

    elseif cmd == "speed" and args[2] then
        local speed = tonumber(args[2])
        if speed then
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = speed
        end

    elseif cmd == "jumppower" and args[2] then
        local jp = tonumber(args[2])
        if jp then
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = jp
        end

    elseif cmd == "view" and args[2] then
        local target = FindPlayer(args[2])
        if target and target.Character and target.Character:FindFirstChildOfClass("Humanoid") then
            Camera.CameraSubject = target.Character:FindFirstChildOfClass("Humanoid")
        end

    elseif cmd == "unview" then
        Camera.CameraSubject = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")

    elseif cmd == "xray" then
        enableXray()

    elseif cmd == "unxray" then
        disableXray()

    elseif cmd == "coolkid" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/COOLKIDHUB/main/Main.txt"))()

    elseif cmd == "portalgun" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/Portal-gun-/main/Main.txt"))()

    elseif cmd == "void" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/Void-fe/main/main.txt"))()

    elseif cmd == "gravitygun" then
        loadstring(game:HttpGet("https://scriptblox.com/raw/Universal-Script-Telekinesis-12332"))()

    elseif cmd == "angelhub" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/angelhub/main/Main.txt"))()

    elseif cmd == "spawncars" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Shadow6698/spawncars/main/Main.txt"))()

    elseif cmd == "duplicatorcars" then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/kigredns/Flame-Object/refs/heads/main/script.lua"))()

    elseif cmd == "lanterna" then
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Flashlight-Script-40768"))()
    end
end)
